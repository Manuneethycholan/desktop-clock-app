{"ast":null,"code":"import{useState,useEffect,useCallback,useRef}from'react';import{MOUSE_ACTIVITY}from'../utils/constants';/**\n * Custom hook for detecting mouse activity and auto-hiding UI elements\n */export const useMouseActivity=()=>{const[isActive,setIsActive]=useState(false);const timeoutRef=useRef(null);const lastActivityRef=useRef(Date.now());// Clear existing timeout\nconst clearActivityTimeout=useCallback(()=>{if(timeoutRef.current){clearTimeout(timeoutRef.current);timeoutRef.current=null;}},[]);// Set timeout to hide UI after inactivity\nconst setActivityTimeout=useCallback(()=>{clearActivityTimeout();timeoutRef.current=setTimeout(()=>{setIsActive(false);},MOUSE_ACTIVITY.HIDE_DELAY);},[clearActivityTimeout]);// Handle mouse activity\nconst handleMouseActivity=useCallback(()=>{const now=Date.now();// Debounce mouse events to avoid excessive updates\nif(now-lastActivityRef.current<MOUSE_ACTIVITY.DEBOUNCE_DELAY){return;}lastActivityRef.current=now;// Show settings panel\nif(!isActive){setIsActive(true);}// Reset hide timer\nsetActivityTimeout();},[isActive,setActivityTimeout]);// Force show settings (for manual triggers)\nconst showSettings=useCallback(()=>{setIsActive(true);setActivityTimeout();},[setActivityTimeout]);// Force hide settings\nconst hideSettings=useCallback(()=>{setIsActive(false);clearActivityTimeout();},[clearActivityTimeout]);// Set up mouse event listeners\nuseEffect(()=>{const events=['mousemove','mouseenter','click'];events.forEach(event=>{document.addEventListener(event,handleMouseActivity,{passive:true});});return()=>{events.forEach(event=>{document.removeEventListener(event,handleMouseActivity);});clearActivityTimeout();};},[handleMouseActivity,clearActivityTimeout]);// Cleanup timeout on unmount\nuseEffect(()=>{return()=>{clearActivityTimeout();};},[clearActivityTimeout]);return{isActive,showSettings,hideSettings};};","map":{"version":3,"names":["useState","useEffect","useCallback","useRef","MOUSE_ACTIVITY","useMouseActivity","isActive","setIsActive","timeoutRef","lastActivityRef","Date","now","clearActivityTimeout","current","clearTimeout","setActivityTimeout","setTimeout","HIDE_DELAY","handleMouseActivity","DEBOUNCE_DELAY","showSettings","hideSettings","events","forEach","event","document","addEventListener","passive","removeEventListener"],"sources":["/Users/chmanune/Project/Github_wall_paper_project/desktop-clock-app/src/hooks/useMouseActivity.ts"],"sourcesContent":["import { useState, useEffect, useCallback, useRef } from 'react';\nimport { MOUSE_ACTIVITY } from '../utils/constants';\n\n/**\n * Custom hook for detecting mouse activity and auto-hiding UI elements\n */\nexport const useMouseActivity = () => {\n  const [isActive, setIsActive] = useState(false);\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const lastActivityRef = useRef<number>(Date.now());\n\n  // Clear existing timeout\n  const clearActivityTimeout = useCallback(() => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = null;\n    }\n  }, []);\n\n  // Set timeout to hide UI after inactivity\n  const setActivityTimeout = useCallback(() => {\n    clearActivityTimeout();\n    \n    timeoutRef.current = setTimeout(() => {\n      setIsActive(false);\n    }, MOUSE_ACTIVITY.HIDE_DELAY);\n  }, [clearActivityTimeout]);\n\n  // Handle mouse activity\n  const handleMouseActivity = useCallback(() => {\n    const now = Date.now();\n    \n    // Debounce mouse events to avoid excessive updates\n    if (now - lastActivityRef.current < MOUSE_ACTIVITY.DEBOUNCE_DELAY) {\n      return;\n    }\n    \n    lastActivityRef.current = now;\n    \n    // Show settings panel\n    if (!isActive) {\n      setIsActive(true);\n    }\n    \n    // Reset hide timer\n    setActivityTimeout();\n  }, [isActive, setActivityTimeout]);\n\n  // Force show settings (for manual triggers)\n  const showSettings = useCallback(() => {\n    setIsActive(true);\n    setActivityTimeout();\n  }, [setActivityTimeout]);\n\n  // Force hide settings\n  const hideSettings = useCallback(() => {\n    setIsActive(false);\n    clearActivityTimeout();\n  }, [clearActivityTimeout]);\n\n  // Set up mouse event listeners\n  useEffect(() => {\n    const events = ['mousemove', 'mouseenter', 'click'];\n    \n    events.forEach(event => {\n      document.addEventListener(event, handleMouseActivity, { passive: true });\n    });\n\n    return () => {\n      events.forEach(event => {\n        document.removeEventListener(event, handleMouseActivity);\n      });\n      clearActivityTimeout();\n    };\n  }, [handleMouseActivity, clearActivityTimeout]);\n\n  // Cleanup timeout on unmount\n  useEffect(() => {\n    return () => {\n      clearActivityTimeout();\n    };\n  }, [clearActivityTimeout]);\n\n  return {\n    isActive,\n    showSettings,\n    hideSettings,\n  };\n};"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,WAAW,CAAEC,MAAM,KAAQ,OAAO,CAChE,OAASC,cAAc,KAAQ,oBAAoB,CAEnD;AACA;AACA,GACA,MAAO,MAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CACpC,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGP,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAAQ,UAAU,CAAGL,MAAM,CAAwB,IAAI,CAAC,CACtD,KAAM,CAAAM,eAAe,CAAGN,MAAM,CAASO,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC,CAElD;AACA,KAAM,CAAAC,oBAAoB,CAAGV,WAAW,CAAC,IAAM,CAC7C,GAAIM,UAAU,CAACK,OAAO,CAAE,CACtBC,YAAY,CAACN,UAAU,CAACK,OAAO,CAAC,CAChCL,UAAU,CAACK,OAAO,CAAG,IAAI,CAC3B,CACF,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAE,kBAAkB,CAAGb,WAAW,CAAC,IAAM,CAC3CU,oBAAoB,CAAC,CAAC,CAEtBJ,UAAU,CAACK,OAAO,CAAGG,UAAU,CAAC,IAAM,CACpCT,WAAW,CAAC,KAAK,CAAC,CACpB,CAAC,CAAEH,cAAc,CAACa,UAAU,CAAC,CAC/B,CAAC,CAAE,CAACL,oBAAoB,CAAC,CAAC,CAE1B;AACA,KAAM,CAAAM,mBAAmB,CAAGhB,WAAW,CAAC,IAAM,CAC5C,KAAM,CAAAS,GAAG,CAAGD,IAAI,CAACC,GAAG,CAAC,CAAC,CAEtB;AACA,GAAIA,GAAG,CAAGF,eAAe,CAACI,OAAO,CAAGT,cAAc,CAACe,cAAc,CAAE,CACjE,OACF,CAEAV,eAAe,CAACI,OAAO,CAAGF,GAAG,CAE7B;AACA,GAAI,CAACL,QAAQ,CAAE,CACbC,WAAW,CAAC,IAAI,CAAC,CACnB,CAEA;AACAQ,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,CAACT,QAAQ,CAAES,kBAAkB,CAAC,CAAC,CAElC;AACA,KAAM,CAAAK,YAAY,CAAGlB,WAAW,CAAC,IAAM,CACrCK,WAAW,CAAC,IAAI,CAAC,CACjBQ,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,CAACA,kBAAkB,CAAC,CAAC,CAExB;AACA,KAAM,CAAAM,YAAY,CAAGnB,WAAW,CAAC,IAAM,CACrCK,WAAW,CAAC,KAAK,CAAC,CAClBK,oBAAoB,CAAC,CAAC,CACxB,CAAC,CAAE,CAACA,oBAAoB,CAAC,CAAC,CAE1B;AACAX,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,MAAM,CAAG,CAAC,WAAW,CAAE,YAAY,CAAE,OAAO,CAAC,CAEnDA,MAAM,CAACC,OAAO,CAACC,KAAK,EAAI,CACtBC,QAAQ,CAACC,gBAAgB,CAACF,KAAK,CAAEN,mBAAmB,CAAE,CAAES,OAAO,CAAE,IAAK,CAAC,CAAC,CAC1E,CAAC,CAAC,CAEF,MAAO,IAAM,CACXL,MAAM,CAACC,OAAO,CAACC,KAAK,EAAI,CACtBC,QAAQ,CAACG,mBAAmB,CAACJ,KAAK,CAAEN,mBAAmB,CAAC,CAC1D,CAAC,CAAC,CACFN,oBAAoB,CAAC,CAAC,CACxB,CAAC,CACH,CAAC,CAAE,CAACM,mBAAmB,CAAEN,oBAAoB,CAAC,CAAC,CAE/C;AACAX,SAAS,CAAC,IAAM,CACd,MAAO,IAAM,CACXW,oBAAoB,CAAC,CAAC,CACxB,CAAC,CACH,CAAC,CAAE,CAACA,oBAAoB,CAAC,CAAC,CAE1B,MAAO,CACLN,QAAQ,CACRc,YAAY,CACZC,YACF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}