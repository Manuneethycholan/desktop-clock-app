/* Settings Component Styles with Responsive Design */

.settings-panel {
  position: fixed;
  /* Responsive positioning using viewport units */
  top: clamp(1rem, 3vh, 3rem);
  right: clamp(1rem, 3vw, 3rem);
  /* Responsive width using viewport units with constraints */
  width: clamp(280px, 25vw, 400px);
  max-width: 90vw;
  max-height: calc(100vh - clamp(2rem, 6vh, 6rem));
  background: rgba(0, 0, 0, 0.9);
  backdrop-filter: blur(clamp(8px, 1vw, 15px));
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: clamp(8px, 1vw, 16px);
  color: #ffffff;
  font-family: "Arial", sans-serif;
  z-index: 1000;
  overflow-y: auto;
  /* Smooth transitions with responsive timing */
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 clamp(4px, 1vh, 12px) clamp(16px, 4vw, 48px) rgba(0, 0, 0, 0.3);
  /* Use CSS Grid for internal layout */
  display: grid;
  grid-template-rows: auto;
}

.settings-visible {
  opacity: 1;
  transform: translateY(0);
  pointer-events: all;
}

.settings-hidden {
  opacity: 0;
  transform: translateY(-20px);
  pointer-events: none;
}

.settings-content {
  /* Responsive padding using viewport units */
  padding: clamp(1rem, 2.5vw, 2rem);
  /* Use CSS Grid for section layout */
  display: grid;
  gap: clamp(1rem, 2vh, 2rem);
}

.settings-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  padding-bottom: clamp(0.75rem, 1.5vh, 1.25rem);
}

.settings-close-button {
  background: none;
  border: none;
  color: rgba(255, 255, 255, 0.7);
  font-size: clamp(1.2rem, 2vw, 1.5rem);
  cursor: pointer;
  padding: 0.25rem;
  border-radius: 4px;
  transition: color 0.2s ease, background-color 0.2s ease;
}

.settings-close-button:hover {
  color: #ffffff;
  background-color: rgba(255, 255, 255, 0.1);
}

.settings-title {
  /* Responsive font sizing */
  font-size: clamp(1.25rem, 2.5vw, 1.75rem);
  font-weight: 300;
  margin: 0;
  text-align: center;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  padding-bottom: clamp(0.75rem, 1.5vh, 1.25rem);
  line-height: 1.2;
}

.settings-section {
  /* Use CSS Grid for consistent spacing */
  display: grid;
  gap: clamp(0.5rem, 1vh, 1rem);
}

.settings-section-title {
  /* Responsive section title sizing */
  font-size: clamp(0.9rem, 1.8vw, 1.1rem);
  font-weight: 400;
  margin: 0;
  color: rgba(255, 255, 255, 0.9);
  line-height: 1.3;
}

/* Toggle Controls with Responsive Design */
.settings-toggle-group {
  /* Use CSS Grid for consistent spacing */
  display: grid;
  gap: clamp(0.25rem, 0.8vh, 0.75rem);
}

.settings-toggle {
  /* Use Flexbox for alignment with responsive spacing */
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: clamp(0.375rem, 1vh, 0.75rem) clamp(0.5rem, 1vw, 1rem);
  border-radius: clamp(4px, 0.5vw, 8px);
  transition: background-color 0.2s ease, transform 0.1s ease;
  /* Responsive minimum touch target */
  min-height: clamp(2.5rem, 5vh, 3rem);
}

.settings-toggle:hover {
  background-color: rgba(255, 255, 255, 0.05);
  transform: translateY(-1px);
}

.settings-toggle:active {
  transform: translateY(0);
}

.settings-toggle input[type="checkbox"] {
  margin-right: clamp(0.5rem, 1.5vw, 1rem);
  /* Responsive checkbox sizing */
  width: clamp(14px, 2vw, 20px);
  height: clamp(14px, 2vw, 20px);
  accent-color: #4a9eff;
  flex-shrink: 0;
}

.settings-toggle-label {
  /* Responsive label text */
  font-size: clamp(0.8rem, 1.6vw, 1rem);
  font-weight: 300;
  line-height: 1.4;
}

/* Radio Controls with Responsive Grid Layout */
.settings-radio-group {
  /* Use CSS Grid for responsive radio button layout */
  display: grid;
  grid-template-columns: repeat(
    auto-fit,
    minmax(clamp(80px, 15vw, 120px), 1fr)
  );
  gap: clamp(0.5rem, 1vw, 1rem);
}

.settings-radio {
  /* Use Flexbox for radio button alignment */
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: clamp(0.375rem, 1vh, 0.625rem) clamp(0.5rem, 1vw, 0.75rem);
  border-radius: clamp(4px, 0.5vw, 8px);
  transition: background-color 0.2s ease, transform 0.1s ease;
  /* Responsive minimum touch target */
  min-height: clamp(2.25rem, 4vh, 2.75rem);
  justify-content: center;
}

.settings-radio:hover {
  background-color: rgba(255, 255, 255, 0.05);
  transform: translateY(-1px);
}

.settings-radio:active {
  transform: translateY(0);
}

.settings-radio input[type="radio"] {
  margin-right: clamp(0.375rem, 1vw, 0.625rem);
  /* Responsive radio button sizing */
  width: clamp(12px, 1.8vw, 16px);
  height: clamp(12px, 1.8vw, 16px);
  accent-color: #4a9eff;
  flex-shrink: 0;
}

.settings-radio-label {
  /* Responsive radio label text */
  font-size: clamp(0.75rem, 1.4vw, 0.9rem);
  font-weight: 300;
  white-space: nowrap;
  text-align: center;
  line-height: 1.3;
}

/* Select Dropdown */
.settings-select {
  width: 100%;
  padding: 0.75rem;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 6px;
  color: #ffffff;
  font-size: 0.9rem;
  font-weight: 300;
  cursor: pointer;
  transition: all 0.2s ease;
}

.settings-select:hover {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 255, 255, 0.3);
}

.settings-select:focus {
  outline: none;
  border-color: #4a9eff;
  box-shadow: 0 0 0 2px rgba(74, 158, 255, 0.2);
}

.settings-select option {
  background: #1a1a1a;
  color: #ffffff;
}

/* Category Grid with Responsive Design */
.settings-category-grid {
  /* Responsive grid layout for categories */
  display: grid;
  grid-template-columns: repeat(
    auto-fit,
    minmax(clamp(120px, 20vw, 160px), 1fr)
  );
  gap: clamp(0.375rem, 0.8vw, 0.75rem);
}

.settings-category {
  /* Use Flexbox for category item layout */
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: clamp(0.375rem, 1vh, 0.75rem) clamp(0.5rem, 1vw, 0.875rem);
  border-radius: clamp(4px, 0.5vw, 8px);
  transition: background-color 0.2s ease, border-color 0.2s ease,
    transform 0.1s ease, box-shadow 0.2s ease;
  border: 1px solid rgba(255, 255, 255, 0.1);
  /* Responsive minimum touch target */
  min-height: clamp(2.25rem, 4vh, 2.75rem);
  position: relative;
}

.settings-category:hover {
  background-color: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.2);
  transform: translateY(-1px);
}

.settings-category:active {
  transform: translateY(0);
}

/* Enhanced visual feedback for selected categories */
.settings-category.category-selected {
  background-color: rgba(74, 158, 255, 0.15);
  border-color: rgba(74, 158, 255, 0.4);
  box-shadow: 0 0 0 1px rgba(74, 158, 255, 0.2);
}

.settings-category.category-selected:hover {
  background-color: rgba(74, 158, 255, 0.2);
  border-color: rgba(74, 158, 255, 0.5);
  box-shadow: 0 0 0 1px rgba(74, 158, 255, 0.3);
}

.settings-category.category-unselected {
  background-color: rgba(255, 255, 255, 0.02);
  border-color: rgba(255, 255, 255, 0.08);
  opacity: 0.7;
}

.settings-category.category-unselected:hover {
  background-color: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.15);
  opacity: 0.9;
}

/* Visual indicator for empty categories warning */
.settings-category-warning {
  margin-top: clamp(0.5rem, 1vh, 0.75rem);
  padding: clamp(0.5rem, 1vh, 0.75rem);
  background-color: rgba(255, 193, 7, 0.1);
  border: 1px solid rgba(255, 193, 7, 0.3);
  border-radius: clamp(4px, 0.5vw, 8px);
  color: rgba(255, 193, 7, 0.9);
  font-size: clamp(0.7rem, 1.2vw, 0.8rem);
  text-align: center;
  line-height: 1.4;
}

/* Info about selected categories */
.settings-category-info {
  margin-top: clamp(0.375rem, 0.8vh, 0.625rem);
  padding: clamp(0.375rem, 0.8vh, 0.625rem);
  background-color: rgba(74, 158, 255, 0.1);
  border: 1px solid rgba(74, 158, 255, 0.2);
  border-radius: clamp(4px, 0.5vw, 8px);
  color: rgba(74, 158, 255, 0.9);
  font-size: clamp(0.7rem, 1.2vw, 0.8rem);
  text-align: center;
  line-height: 1.4;
}

/* Empty category styling */
.settings-category.category-empty {
  opacity: 0.4;
  cursor: not-allowed;
}

.settings-category.category-empty:hover {
  background-color: rgba(255, 255, 255, 0.02);
  border-color: rgba(255, 255, 255, 0.08);
  transform: none;
}

.settings-category.category-empty input[type="checkbox"] {
  cursor: not-allowed;
}

/* Category count and empty indicators */
.settings-category-count {
  margin-left: clamp(0.25rem, 0.5vw, 0.375rem);
  font-size: clamp(0.6rem, 1.1vw, 0.7rem);
  color: rgba(74, 158, 255, 0.8);
  font-weight: 400;
}

.settings-category-empty-indicator {
  margin-left: clamp(0.25rem, 0.5vw, 0.375rem);
  font-size: clamp(0.6rem, 1.1vw, 0.7rem);
  color: rgba(255, 255, 255, 0.4);
  font-style: italic;
}

.settings-category input[type="checkbox"] {
  margin-right: clamp(0.375rem, 1vw, 0.625rem);
  /* Responsive checkbox sizing */
  width: clamp(12px, 1.8vw, 16px);
  height: clamp(12px, 1.8vw, 16px);
  accent-color: #4a9eff;
  flex-shrink: 0;
}

.settings-category-label {
  /* Responsive category label text */
  font-size: clamp(0.7rem, 1.3vw, 0.85rem);
  font-weight: 300;
  line-height: 1.3;
  /* Allow text wrapping for longer category names */
  word-break: break-word;
}

/* Responsive breakpoints for settings panel optimization */

/* Large desktop screens (1920px+) - Enhanced spacing */
@media (min-width: 120em) {
  .settings-panel {
    width: clamp(350px, 22vw, 450px);
    top: clamp(2rem, 4vh, 4rem);
    right: clamp(2rem, 4vw, 4rem);
  }

  .settings-content {
    padding: clamp(1.5rem, 3vw, 2.5rem);
    gap: clamp(1.5rem, 2.5vh, 2.5rem);
  }
}

/* Desktop screens (1200px - 1919px) - Standard layout */
@media (min-width: 75em) and (max-width: 119.9375em) {
  .settings-panel {
    width: clamp(320px, 25vw, 400px);
  }

  .settings-category-grid {
    grid-template-columns: repeat(
      auto-fit,
      minmax(clamp(130px, 18vw, 150px), 1fr)
    );
  }
}

/* Tablet landscape (768px - 1199px) - Adjusted for touch */
@media (min-width: 48em) and (max-width: 74.9375em) {
  .settings-panel {
    top: clamp(1rem, 2vh, 2rem);
    right: clamp(1rem, 2vw, 2rem);
    left: clamp(1rem, 2vw, 2rem);
    width: auto;
    max-width: none;
    max-height: calc(100vh - clamp(2rem, 4vh, 4rem));
  }

  .settings-content {
    padding: clamp(1rem, 2vw, 1.5rem);
    gap: clamp(1rem, 1.5vh, 1.5rem);
  }

  .settings-category-grid {
    grid-template-columns: repeat(
      auto-fit,
      minmax(clamp(110px, 16vw, 140px), 1fr)
    );
  }

  .settings-radio-group {
    grid-template-columns: repeat(
      auto-fit,
      minmax(clamp(90px, 12vw, 110px), 1fr)
    );
  }
}

/* Tablet portrait (481px - 767px) - Vertical optimization */
@media (min-width: 30.0625em) and (max-width: 47.9375em) {
  .settings-panel {
    top: clamp(0.75rem, 1.5vh, 1.5rem);
    right: clamp(0.75rem, 1.5vw, 1.5rem);
    left: clamp(0.75rem, 1.5vw, 1.5rem);
    width: auto;
    max-width: none;
    border-radius: clamp(6px, 1vw, 12px);
  }

  .settings-content {
    padding: clamp(0.875rem, 2vw, 1.25rem);
    gap: clamp(0.875rem, 1.5vh, 1.25rem);
  }

  .settings-category-grid {
    grid-template-columns: repeat(
      auto-fit,
      minmax(clamp(100px, 18vw, 130px), 1fr)
    );
  }

  .settings-radio-group {
    grid-template-columns: repeat(
      auto-fit,
      minmax(clamp(80px, 15vw, 100px), 1fr)
    );
  }
}

/* Mobile landscape (426px - 480px) - Compact horizontal layout */
@media (min-width: 26.625em) and (max-width: 30em) {
  .settings-panel {
    top: clamp(0.5rem, 1vh, 1rem);
    right: clamp(0.5rem, 1vw, 1rem);
    left: clamp(0.5rem, 1vw, 1rem);
    width: auto;
    border-radius: clamp(6px, 0.8vw, 10px);
  }

  .settings-category-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .settings-radio-group {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* Mobile portrait (320px - 425px) - Single column layout */
@media (max-width: 26.5625em) {
  .settings-panel {
    top: clamp(0.5rem, 1vh, 1rem);
    right: clamp(0.5rem, 1vw, 1rem);
    left: clamp(0.5rem, 1vw, 1rem);
    width: auto;
    border-radius: clamp(6px, 1vw, 8px);
    max-height: calc(100vh - clamp(1rem, 2vh, 2rem));
  }

  .settings-content {
    padding: clamp(0.75rem, 2vw, 1rem);
    gap: clamp(0.75rem, 1.5vh, 1rem);
  }

  .settings-category-grid {
    grid-template-columns: 1fr 1fr;
    gap: clamp(0.25rem, 0.5vw, 0.5rem);
  }

  .settings-radio-group {
    grid-template-columns: 1fr;
    gap: clamp(0.375rem, 0.8vh, 0.625rem);
  }

  .settings-toggle-group {
    gap: clamp(0.25rem, 0.5vh, 0.5rem);
  }

  .settings-color-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: clamp(0.375rem, 0.8vw, 0.5rem);
    max-height: 200px;
    overflow-y: auto;
  }

  .settings-color-swatch {
    width: clamp(1.5rem, 6vw, 2rem);
    height: clamp(1.5rem, 6vw, 2rem);
  }

  .settings-dropdown-header {
    padding: clamp(0.625rem, 1.2vh, 0.875rem) clamp(0.75rem, 1.5vw, 1rem);
    font-size: clamp(0.8rem, 3.5vw, 1rem);
  }

  .settings-dropdown-content {
    padding: clamp(0.75rem, 1.5vh, 1rem);
    gap: clamp(0.625rem, 1.2vh, 1rem);
  }
}

/* Ultra-wide screens (aspect ratio > 21:9) - Side panel optimization */
@media (min-aspect-ratio: 21/9) {
  .settings-panel {
    width: clamp(300px, 18vw, 380px);
    right: clamp(3rem, 5vw, 6rem);
  }
}

/* Very tall screens (aspect ratio < 4:3) - Vertical optimization */
@media (max-aspect-ratio: 4/3) {
  .settings-panel {
    max-height: calc(100vh - clamp(3rem, 8vh, 8rem));
    top: clamp(1.5rem, 4vh, 4rem);
  }

  .settings-content {
    gap: clamp(0.75rem, 1vh, 1.25rem);
  }
}

/* Landscape orientation with limited height */
@media (orientation: landscape) and (max-height: 30em) {
  .settings-panel {
    top: clamp(0.5rem, 1vh, 1rem);
    max-height: calc(100vh - clamp(1rem, 2vh, 2rem));
  }

  .settings-content {
    padding: clamp(0.75rem, 1.5vh, 1rem);
    gap: clamp(0.5rem, 1vh, 0.75rem);
  }

  .settings-category-grid {
    grid-template-columns: repeat(
      auto-fit,
      minmax(clamp(90px, 12vw, 120px), 1fr)
    );
  }
}

/* Scrollbar Styling */
.settings-panel::-webkit-scrollbar {
  width: 6px;
}

.settings-panel::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

.settings-panel::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 3px;
}

.settings-panel::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.5);
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .settings-panel {
    background: rgba(0, 0, 0, 0.95);
    border-color: rgba(255, 255, 255, 0.3);
  }

  .settings-toggle:hover,
  .settings-radio:hover,
  .settings-category:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .settings-panel {
    transition: none;
  }

  .settings-toggle,
  .settings-radio,
  .settings-category,
  .settings-select {
    transition: none;
  }
}

/* Dropdown Styles */
.settings-dropdown {
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: clamp(6px, 1vw, 12px);
  overflow: hidden;
}

.settings-dropdown-header {
  width: 100%;
  background: rgba(255, 255, 255, 0.05);
  border: none;
  color: #ffffff;
  padding: clamp(0.75rem, 1.5vh, 1rem) clamp(1rem, 2vw, 1.5rem);
  font-size: clamp(0.9rem, 1.8vw, 1.1rem);
  font-weight: 400;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: background-color 0.2s ease;
  text-align: left;
}

.settings-dropdown-header:hover {
  background: rgba(255, 255, 255, 0.08);
}

.settings-dropdown-header.expanded {
  background: rgba(74, 158, 255, 0.1);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.dropdown-arrow {
  font-size: clamp(0.8rem, 1.5vw, 1rem);
  transition: transform 0.2s ease;
}

.settings-dropdown-content {
  padding: clamp(1rem, 2vh, 1.5rem);
  background: rgba(0, 0, 0, 0.3);
  display: grid;
  gap: clamp(0.75rem, 1.5vh, 1.25rem);
}

.settings-subsection {
  display: grid;
  gap: clamp(0.5rem, 1vh, 0.75rem);
}

.settings-subsection-title {
  font-size: clamp(0.8rem, 1.6vw, 1rem);
  font-weight: 400;
  margin: 0;
  color: rgba(255, 255, 255, 0.8);
  line-height: 1.3;
}

/* Color Picker Styles */
.settings-color-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: clamp(0.5rem, 1vw, 0.75rem);
}

.settings-color-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  padding: clamp(0.5rem, 1vh, 0.75rem);
  border-radius: clamp(4px, 0.5vw, 8px);
  transition: background-color 0.2s ease;
  border: 1px solid transparent;
}

.settings-color-option:hover {
  background-color: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.1);
}

.settings-color-option input[type="radio"] {
  display: none;
}

.settings-color-option input[type="radio"]:checked + .settings-color-swatch {
  border: 2px solid #4a9eff;
  box-shadow: 0 0 0 2px rgba(74, 158, 255, 0.3);
}

.settings-color-swatch {
  width: clamp(2rem, 4vw, 3rem);
  height: clamp(2rem, 4vw, 3rem);
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.2);
  margin-bottom: clamp(0.25rem, 0.5vh, 0.5rem);
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.settings-color-name {
  font-size: clamp(0.7rem, 1.3vw, 0.85rem);
  font-weight: 300;
  text-align: center;
  line-height: 1.2;
}

/* Focus styles for accessibility */
.settings-toggle:focus-within,
.settings-radio:focus-within,
.settings-category:focus-within,
.settings-color-option:focus-within {
  outline: 2px solid #4a9eff;
  outline-offset: 2px;
}

.settings-dropdown-header:focus {
  outline: 2px solid #4a9eff;
  outline-offset: 2px;
}
